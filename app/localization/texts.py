from typing import Dict, Any

TEXTS = {
    "ru": {
        "welcome": """
üëã <b>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ VPN —Å–µ—Ä–≤–∏—Å!</b>

üîê –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π VPN –¥–ª—è –∑–∞—â–∏—Ç—ã –≤–∞—à–µ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.

üí∞ <b>–°—Ç–æ–∏–º–æ—Å—Ç—å:</b> 6‚ÇΩ/–¥–µ–Ω—å
   (–ø–æ–ø–æ–ª–Ω—è–µ—Ç–µ –±–∞–ª–∞–Ω—Å - –ø–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

üéÅ <b>–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥:</b> 1 –¥–µ–Ω—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ!

–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å:
""",
        "profile": """
üë§ <b>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</b>

üÜî ID: <code>{telegram_id}</code>
üí∞ –ë–∞–ª–∞–Ω—Å: <b>{balance:.2f}‚ÇΩ</b>
üìÖ –ü–æ–¥–ø–∏—Å–∫–∞ –¥–æ: <b>{expires}</b>
üìä –°—Ç–∞—Ç—É—Å: <b>{status}</b>

üí° –°—Ç–æ–∏–º–æ—Å—Ç—å: 6‚ÇΩ/–¥–µ–Ω—å
üìà –û–ø–ª–∞—á–µ–Ω–æ –¥–Ω–µ–π: {days_paid}
""",
        "subscription_active": """
‚úÖ <b>–í–∞—à–∞ VPN –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞!</b>

üìÖ –î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: <b>{expires}</b>
üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å: <b>{balance:.2f}‚ÇΩ</b>

–ü—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –±–∞–ª–∞–Ω—Å–µ –ø–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
""",
        "subscription_inactive": """
‚ùå <b>VPN –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞</b>

üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å: <b>{balance:.2f}‚ÇΩ</b>

–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –º–∏–Ω–∏–º—É–º –Ω–∞ 6‚ÇΩ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏.
""",
        "deposit_menu": """
üí∞ <b>–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</b>

–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: <b>{balance:.2f}‚ÇΩ</b>
–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏: <b>6‚ÇΩ/–¥–µ–Ω—å</b>

–í—ã–±–µ—Ä–∏—Ç–µ —Å—É–º–º—É –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è:
""",
        "payment_created": """
üí≥ <b>–°—á–µ—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É —Å–æ–∑–¥–∞–Ω</b>

–°—É–º–º–∞: <b>{amount}‚ÇΩ</b>

–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–ø–ª–∞—Ç–∏—Ç—å" –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –æ–ø–ª–∞—Ç–µ.
–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–∞–∂–º–∏—Ç–µ "–Ø –æ–ø–ª–∞—Ç–∏–ª" –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.
""",
        "payment_success": """
‚úÖ <b>–û–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–∞!</b>

–°—É–º–º–∞: <b>{amount:.2f}‚ÇΩ</b>
–ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: <b>{balance:.2f}‚ÇΩ</b>

{subscription_info}
""",
        "payment_pending": """
‚è≥ –ü–ª–∞—Ç–µ–∂ –µ—â–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ–º–Ω–æ–≥–æ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.
""",
        "payment_failed": """
‚ùå –ü–ª–∞—Ç–µ–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ –±—ã–ª –æ–ø–ª–∞—á–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.
""",
        "trial_activated": """
üéÅ <b>–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!</b>

–í–∞—à–∞ VPN –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ –Ω–∞ 1 –¥–µ–Ω—å.
–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è!
""",
        "trial_already_used": """
‚ùå –í—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥.

–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏.
""",
        "vpn_key": """
üîê <b>–í–∞—à VPN –∫–ª—é—á:</b>

<code>{subscription_url}</code>

üì± <b>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é:</b>

1. –°–∫–∞—á–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ V2RayNG (Android) –∏–ª–∏ Streisand (iOS)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –≤—ã—à–µ
3. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞–∂–º–∏—Ç–µ "+" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "–ò–º–ø–æ—Ä—Ç –∏–∑ –±—É—Ñ–µ—Ä–∞"
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å!

üîó –ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ: {subscription_url}
""",
        "help": """
‚ùì <b>–°–ø—Ä–∞–≤–∫–∞</b>

<b>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</b>
‚Ä¢ –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å –ª—é–±–æ–π —Å—É–º–º–æ–π
‚Ä¢ –ü–æ–¥–ø–∏—Å–∫–∞ —Å—Ç–æ–∏—Ç 6‚ÇΩ/–¥–µ–Ω—å
‚Ä¢ –ö–∞–∂–¥—ã–π –¥–µ–Ω—å —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è 6‚ÇΩ —Å –±–∞–ª–∞–Ω—Å–∞
‚Ä¢ –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å < 6‚ÇΩ, –ø–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
‚Ä¢ –ü—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

<b>–ü–æ–¥–¥–µ—Ä–∂–∫–∞:</b>
–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–∞–ø–∏—à–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.
""",
        "admin_panel": """
üîß <b>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</b>

üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {users_count}
‚úÖ –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫: {active_count}
üí∞ –û–±—â–∏–π –±–∞–ª–∞–Ω—Å: {total_balance:.2f}‚ÇΩ
""",
        "error": "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.",
        "maintenance": "üîß –°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
    }
}


def get_texts(language: str = "ru") -> Dict[str, Any]:
    return TEXTS.get(language, TEXTS["ru"])


def get_text(key: str, language: str = "ru", **kwargs) -> str:
    texts = get_texts(language)
    text = texts.get(key, key)
    if kwargs:
        try:
            text = text.format(**kwargs)
        except KeyError:
            pass
    return text


_rules_cache: Dict[str, Any] = {}


def clear_rules_cache() -> None:
    """Clear the rules cache."""
    global _rules_cache
    _rules_cache = {}
